require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesSub/repository/detail"],{"096e":function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("2eee")),o=a(n("c973")),u=a(n("1487"));n("81ab");var r=a(n("7768")),c=n("039d"),s=n("01a0"),l=s.marked,d={data:function(){return{item:{},cu_starsRepo:[],isStared:!1,content:"",parse_style:r.default.uParseStyle,checkIndex:0,readMeLoaded:!1,tabItems:[{name:"info-circle",label:"摘要"},{name:"file-text",label:"介绍"}]}},onLoad:function(e){e.full_name?this.showDetail(e.full_name):(this.item=JSON.parse(decodeURIComponent(e.item)),this.getStars(),this.saveViewHistory()),this.initHighLight()},methods:{tabItemClick:function(e){this.checkIndex=e,1==e&&this.getReadMe()},itemUserClick:function(t){this.moreShow||e.navigateTo({url:"/pagesSub/developer/detail?login="+encodeURIComponent(this.item.owner.login)})},showDetail:function(e){var t=this;return(0,o.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,c.getModel)(e);case 2:a=n.sent,1==a.code&&(t.item=a.data,t.getStars(),t.saveViewHistory());case 4:case"end":return n.stop()}}),n)})))()},getReadMe:function(){var t=this;return(0,o.default)(i.default.mark((function n(){var a,o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.readMeLoaded){n.next=2;break}return n.abrupt("return");case 2:return e.showLoading({title:"加载数据中....",mask:!0}),n.next=5,(0,c.getReadMe)(t.item.full_name,t.item.default_branch);case 5:a=n.sent,1==a.code&&(o=l(a.data||""),/< img [^>]*src=['"]([^'"]+)[^>]*>/gi,t.content=o),t.readMeLoaded=!0,e.hideLoading();case 9:case"end":return n.stop()}}),n)})))()},viewCodeDir:function(){e.navigateTo({url:"/pagesSub/repository/codeDir?contents_url=".concat(encodeURIComponent(this.item.contents_url))})},getStars:function(){var t=this;e.getStorage({key:"cu_starsRepo",success:function(e){t.cu_starsRepo=e.data,t.isStared=t.cu_starsRepo.some((function(e){return e.full_name==t.item.full_name}))}})},saveStar:function(){var t=this;this.isStared=!this.isStared,this.cu_starsRepo=this.cu_starsRepo.filter((function(e){return e.full_name!=t.item.full_name})),this.isStared&&this.cu_starsRepo.unshift({full_name:this.item.full_name,createTime:new Date}),this.cu_starsRepo.length>500&&this.cu_starsRepo.pop(),e.setStorageSync("cu_starsRepo",this.cu_starsRepo)},saveViewHistory:function(){var t=[],n=this;e.getStorage({key:"cu_viewHistory",success:function(e){t=e.data},fail:function(){},complete:function(){try{t.forEach((function(e,a){if(e.name==n.item.full_name&&"repo"==e.type)throw t.splice(a,1),new Error("LoopInterrupt")}))}catch(a){}t.length>100&&t.splice(t.length-1,1),t.unshift({name:n.item.full_name,createTime:new Date,type:"repo"}),e.setStorage({key:"cu_viewHistory",data:t})}})},initHighLight:function(){u.default.configure({useBR:!0,tabReplace:" "}),l.setOptions({renderer:new l.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,highlight:function(e,t){return t&&u.default.getLanguage(t)?u.default.highlight(t,e,!0).value:u.default.highlightAuto(e).value}})}}};t.default=d}).call(this,n("543d")["default"])},"186c":function(e,t,n){"use strict";n.r(t);var a=n("096e"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"437d":function(e,t,n){},"63e8":function(e,t,n){"use strict";var a=n("437d"),i=n.n(a);i.a},6796:function(e,t,n){"use strict";var a=n("a55c"),i=n.n(a);i.a},"7f86":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"9735"))},uImage:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-image/u-image")]).then(n.bind(null,"a45d"))},uCellGroup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-cell-group/u-cell-group")]).then(n.bind(null,"9536"))},uCell:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-cell/u-cell")]).then(n.bind(null,"c791"))},uParse:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-parse/u-parse")]).then(n.bind(null,"4ba8"))}},i=function(){var e=this.$createElement;this._self._c},o=[]},a55c:function(e,t,n){},be8d:function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("d88d");a(n("66fd"));var i=a(n("c32a"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},c32a:function(e,t,n){"use strict";n.r(t);var a=n("7f86"),i=n("186c");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("63e8"),n("6796");var u=n("f0c5"),r=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"f8ea154c",null,!1,a["a"],void 0);t["default"]=r.exports}},[["be8d","common/runtime","common/vendor","pagesSub/common/vendor"]]]);